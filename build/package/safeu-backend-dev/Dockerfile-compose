FROM golang:1.9.7

MAINTAINER TripleZ "me@triplez.cn"

WORKDIR $GOPATH/src/a2os/safeu-backend
ADD . $GOPATH/src/a2os/safeu-backend/

COPY conf/db.example.json $GOPATH/src/a2os/safeu-backend/conf/db.json

# Add timezone package
RUN apt-get update ;\
    apt-get install -y tzdata

# Add dependencies
RUN go get -u github.com/kardianos/govendor && go get github.com/pilu/fresh && govendor sync

# Build package
RUN go build .

EXPOSE 8080

ENTRYPOINT ["fresh"]
#ENTRYPOINT ["./safeu-backend-dev"]
